/*! PhotoSwipe - v4.1.3 - 2019-01-08
* http://photoswipe.com
* Copyright (c) 2019 Dmitry Semenov; */(function(a,b){if(typeof define==="function"&&define.amd){define(b)}else{if(typeof exports==="object"){module.exports=b()}else{a.PhotoSwipe=b()}}})(this,function(){var a=function(a3,bv,cs,bw,bx){var bB={features:null,bind:function(cD,cB,cC,cA){var p=(cA?"remove":"add")+"EventListener";cB=cB.split(" ");for(var cz=0;cz<cB.length;cz++){if(cB[cz]){cD[p](cB[cz],cC,false)}}},isArray:function(p){return(p instanceof Array)},createEl:function(cz,p){var cA=document.createElement(p||"div");if(cz){cA.className=cz}return cA},getScrollY:function(){var p=window.pageYOffset;return p!==undefined?p:document.documentElement.scrollTop},unbind:function(cA,p,cz){bB.bind(cA,p,cz,true)},removeClass:function(cA,cz){var p=new RegExp("(\\s|^)"+cz+"(\\s|$)");cA.className=cA.className.replace(p," ").replace(/^\s\s*/,"").replace(/\s\s*$/,"")},addClass:function(cz,p){if(!bB.hasClass(cz,p)){cz.className+=(cz.className?" ":"")+p}},hasClass:function(cz,p){return cz.className&&new RegExp("(^|\\s)"+p+"(\\s|$)").test(cz.className)},getChildByClass:function(cz,p){var cA=cz.firstChild;while(cA){if(bB.hasClass(cA,p)){return cA}cA=cA.nextSibling}},arraySearch:function(cB,cA,cz){var p=cB.length;while(p--){if(cB[p][cz]===cA){return p}}return -1},extend:function(cA,cz,p){for(var cB in cz){if(cz.hasOwnProperty(cB)){if(p&&cA.hasOwnProperty(cB)){continue}cA[cB]=cz[cB]}}},easing:{sine:{out:function(p){return Math.sin(p*(Math.PI/2))},inOut:function(p){return -(Math.cos(Math.PI*p)-1)/2}},cubic:{out:function(p){return --p*p*p+1}}},detectFeatures:function(){if(bB.features){return bB.features}var cB=bB.createEl(),cF=cB.style,cI="",cA={};cA.oldIE=document.all&&!document.addEventListener;cA.touch="ontouchstart" in window;if(window.requestAnimationFrame){cA.raf=window.requestAnimationFrame;cA.caf=window.cancelAnimationFrame}cA.pointerEvent=!!(window.PointerEvent)||navigator.msPointerEnabled;if(!cA.pointerEvent){var cz=navigator.userAgent;if(/iP(hone|od)/.test(navigator.platform)){var cJ=(navigator.appVersion).match(/OS (\d+)_(\d+)_?(\d+)?/);if(cJ&&cJ.length>0){cJ=parseInt(cJ[1],10);if(cJ>=1&&cJ<8){cA.isOldIOSPhone=true}}}var cE=cz.match(/Android\s([0-9\.]*)/);var cL=cE?cE[1]:0;cL=parseFloat(cL);if(cL>=1){if(cL<4.4){cA.isOldAndroid=true}cA.androidVersion=cL}cA.isMobileOpera=/opera mini|opera mobi/i.test(cz)}var cG=["transform","perspective","animationName"],cK=["","webkit","Moz","ms","O"],cM,cC;for(var cD=0;cD<4;cD++){cI=cK[cD];for(var cH=0;cH<3;cH++){cM=cG[cH];cC=cI+(cI?cM.charAt(0).toUpperCase()+cM.slice(1):cM);if(!cA[cM]&&cC in cF){cA[cM]=cC}}if(cI&&!cA.raf){cI=cI.toLowerCase();cA.raf=window[cI+"RequestAnimationFrame"];if(cA.raf){cA.caf=window[cI+"CancelAnimationFrame"]||window[cI+"CancelRequestAnimationFrame"]}}}if(!cA.raf){var p=0;cA.raf=function(cO){var cN=new Date().getTime();var cP=Math.max(0,16-(cN-p));var cQ=window.setTimeout(function(){cO(cN+cP)},cP);p=cN+cP;return cQ};cA.caf=function(cN){clearTimeout(cN)}}cA.svg=!!document.createElementNS&&!!document.createElementNS("http://www.w3.org/2000/svg","svg").createSVGRect;bB.features=cA;return cA}};bB.detectFeatures();if(bB.features.oldIE){bB.bind=function(cE,cC,cD,cB){cC=cC.split(" ");var p=(cB?"detach":"attach")+"Event",cA,cF=function(){cD.handleEvent.call(cD)};for(var cz=0;cz<cC.length;cz++){cA=cC[cz];if(cA){if(typeof cD==="object"&&cD.handleEvent){if(!cB){cD["oldIE"+cA]=cF}else{if(!cD["oldIE"+cA]){return false}}cE[p]("on"+cA,cD["oldIE"+cA])}else{cE[p]("on"+cA,cD)}}}}}var a4=this;var D=25,K=3;var ac={allowPanToNext:true,spacing:0.12,bgOpacity:1,mouseUsed:false,loop:true,pinchToClose:true,closeOnScroll:true,closeOnVerticalDrag:true,verticalDragRange:0.75,hideAnimationDuration:333,showAnimationDuration:333,showHideOpacity:false,focus:true,escKey:true,arrowKeys:true,mainScrollEndFriction:0.35,panEndFriction:0.35,isClickableElement:function(p){return p.tagName==="A"},getDoubleTapZoom:function(cz,p){if(cz){return 1}else{return p.initialZoomLevel<0.7?1:1.33}},maxSpreadZoom:1.33,modal:true,scaleMode:"fit"};bB.extend(ac,bw);var bO=function(){return{x:0,y:0}};var G,bV,bH,bJ,l,Z,U=bO(),cw=bO(),al=bO(),bI,ba,aI,b5={},bK,bP,ax,ch,F,a5,bq=0,bX={},bL=bO(),at,q,aW=0,B,bo,J,R,cc,ah,ae=true,ck,aR=[],a9,aZ,af,aC,bj,b6,bb,T={},h=false,be,aK=function(p,cz){bB.extend(a4,cz.publicMethods);aR.push(p)},bC=function(p){var cz=aS();if(p>cz-1){return p-cz}else{if(p<0){return cz+p}}return p},cj={},a8=function(p,cz){if(!cj[p]){cj[p]=[]}return cj[p].push(cz)},ao=function(cz){var cB=cj[cz];if(cB){var p=Array.prototype.slice.call(arguments);p.shift();for(var cA=0;cA<cB.length;cA++){cB[cA].apply(a4,p)}}},ap=function(){return new Date().getTime()},d=function(p){aE=p;a4.bg.style.opacity=p*ac.bgOpacity},r=function(cB,p,cC,cA,cz){if(!h||(cz&&cz!==a4.currItem)){cA=cA/(cz?cz.fitRatio:a4.currItem.fitRatio)}cB[cc]=ax+p+"px, "+cC+"px"+ch+" scale("+cA+")"},ak=function(p){if(bm){if(p){if(bK>a4.currItem.fitRatio){if(!h){bA(a4.currItem,false,true);h=true}}else{if(h){bA(a4.currItem);h=false}}}r(bm,al.x,al.y,bK)}},cv=function(p){if(p.container){r(p.container.style,p.initialPosition.x,p.initialPosition.y,p.initialZoomLevel,p)}},bU=function(p,cz){cz[cc]=ax+p+"px, 0px"+ch},ad=function(p,cA){if(!ac.loop&&cA){var cz=bJ+(bL.x*bq-p)/bL.x,cB=Math.round(p-aH.x);if((cz<0&&cB>0)||(cz>=aS()-1&&cB<0)){p=aH.x+cB*ac.mainScrollEndFriction}}aH.x=p;bU(p,l)},aN=function(cz,cA){var p=ar[cz]-bX[cz];return cw[cz]+U[cz]+p-p*(cA/bP)},a7=function(cz,p){cz.x=p.x;cz.y=p.y;if(p.id){cz.id=p.id}},E=function(cz){cz.x=Math.round(cz.x);cz.y=Math.round(cz.y)},s=null,aD=function(){if(s){bB.unbind(document,"mousemove",aD);bB.addClass(a3,"pswp--has_mouse");ac.mouseUsed=true;ao("mouseUsed")}s=setTimeout(function(){s=null},100)},b3=function(){bB.bind(document,"keydown",a4);if(bb.transform){bB.bind(a4.scrollWrap,"click",a4)}if(!ac.mouseUsed){bB.bind(document,"mousemove",aD)}bB.bind(window,"resize scroll orientationchange",a4);ao("bindEvents")},aq=function(){bB.unbind(window,"resize scroll orientationchange",a4);bB.unbind(window,"scroll",aI.scroll);bB.unbind(document,"keydown",a4);bB.unbind(document,"mousemove",aD);if(bb.transform){bB.unbind(a4.scrollWrap,"click",a4)}if(bW){bB.unbind(window,bI,a4)}clearTimeout(be);ao("unbindEvents")},aJ=function(cz,cA){var p=P(a4.currItem,b5,cz);if(cA){co=p}return p},b2=function(p){if(!p){p=a4.currItem}return p.initialZoomLevel},Q=function(p){if(!p){p=a4.currItem}return p.w>0?ac.maxSpreadZoom:1},cf=function(cA,cB,p,cz){if(cz===a4.currItem.initialZoomLevel){p[cA]=a4.currItem.initialPosition[cA];return true}else{p[cA]=aN(cA,cz);if(p[cA]>cB.min[cA]){p[cA]=cB.min[cA];return true}else{if(p[cA]<cB.max[cA]){p[cA]=cB.max[cA];return true}}}return false},C=function(){if(cc){var p=bb.perspective&&!ck;ax="translate"+(p?"3d(":"(");ch=bb.perspective?", 0px)":")";return}cc="left";bB.addClass(a3,"pswp--ie");bU=function(cz,cA){cA.left=cz+"px"};cv=function(cD){var cA=cD.fitRatio>1?1:cD.fitRatio,cC=cD.container.style,cz=cA*cD.w,cB=cA*cD.h;cC.width=cz+"px";cC.height=cB+"px";cC.left=cD.initialPosition.x+"px";cC.top=cD.initialPosition.y+"px"};ak=function(){if(bm){var cC=bm,cD=a4.currItem,cA=cD.fitRatio>1?1:cD.fitRatio,cz=cA*cD.w,cB=cA*cD.h;cC.width=cz+"px";cC.height=cB+"px";cC.left=al.x+"px";cC.top=al.y+"px"}}},S=function(cz){var p="";if(ac.escKey&&cz.keyCode===27){p="close"}else{if(ac.arrowKeys){if(cz.keyCode===37){p="prev"}else{if(cz.keyCode===39){p="next"}}}}if(p){if(!cz.ctrlKey&&!cz.altKey&&!cz.shiftKey&&!cz.metaKey){if(cz.preventDefault){cz.preventDefault()}else{cz.returnValue=false}a4[p]()}}},bh=function(p){if(!p){return}if(ai||cq||Y||br){p.preventDefault();p.stopPropagation()}},aX=function(){a4.setScrollOffset(0,bB.getScrollY())};var aj={},cm=0,bp=function(p){if(aj[p]){if(aj[p].raf){aZ(aj[p].raf)}cm--;delete aj[p]}},x=function(p){if(aj[p]){bp(p)}if(!aj[p]){cm++;aj[p]={}}},a1=function(){for(var p in aj){if(aj.hasOwnProperty(p)){bp(p)}}},az=function(p,cG,cC,cF,cz,cB,cA){var cE=ap(),cH;x(p);var cD=function(){if(aj[p]){cH=ap()-cE;if(cH>=cF){bp(p);cB(cC);if(cA){cA()}return}cB((cC-cG)*cz(cH/cF)+cG);aj[p].raf=a9(cD)}};cD()};var cp={shout:ao,listen:a8,viewportSize:b5,options:ac,isMainScrollAnimating:function(){return Y},getZoomLevel:function(){return bK},getCurrentIndex:function(){return bJ},isDragging:function(){return bW},isZooming:function(){return bf},setScrollOffset:function(p,cz){bX.x=p;b6=bX.y=cz;ao("updateScrollOffset",bX)},applyZoomPan:function(cB,cA,p,cz){al.x=cA;al.y=p;bK=cB;ak(cz)},init:function(){if(G||bV){return}var cz;a4.framework=bB;a4.template=a3;a4.bg=bB.getChildByClass(a3,"pswp__bg");af=a3.className;G=true;bb=bB.detectFeatures();a9=bb.raf;aZ=bb.caf;cc=bb.transform;bj=bb.oldIE;a4.scrollWrap=bB.getChildByClass(a3,"pswp__scroll-wrap");a4.container=bB.getChildByClass(a4.scrollWrap,"pswp__container");l=a4.container.style;a4.itemHolders=at=[{el:a4.container.children[0],wrap:0,index:-1},{el:a4.container.children[1],wrap:0,index:-1},{el:a4.container.children[2],wrap:0,index:-1}];at[0].el.style.display=at[2].el.style.display="none";C();aI={resize:a4.updateSize,orientationchange:function(){clearTimeout(be);be=setTimeout(function(){if(b5.x!==a4.scrollWrap.clientWidth){a4.updateSize()}},500)},scroll:aX,keydown:S,click:bh};var cB=bb.isOldIOSPhone||bb.isOldAndroid||bb.isMobileOpera;if(!bb.animationName||!bb.transform||cB){ac.showAnimationDuration=ac.hideAnimationDuration=0}for(cz=0;cz<aR.length;cz++){a4["init"+aR[cz]]()}if(bv){var cA=a4.ui=new bv(a4,bB);cA.init()}ao("firstUpdate");bJ=bJ||ac.index||0;if(isNaN(bJ)||bJ<0||bJ>=aS()){bJ=0}a4.currItem=bE(bJ);if(bb.isOldIOSPhone||bb.isOldAndroid){ae=false}a3.setAttribute("aria-hidden","false");if(ac.modal){if(!ae){a3.style.position="absolute";a3.style.top=bB.getScrollY()+"px"}else{a3.style.position="fixed"}}if(b6===undefined){ao("initialLayout");b6=aC=bB.getScrollY()}var p="pswp--open ";if(ac.mainClass){p+=ac.mainClass+" "}if(ac.showHideOpacity){p+="pswp--animate_opacity "}p+=ck?"pswp--touch":"pswp--notouch";p+=bb.animationName?" pswp--css_animation":"";p+=bb.svg?" pswp--svg":"";bB.addClass(a3,p);a4.updateSize();Z=-1;aW=null;for(cz=0;cz<K;cz++){bU((cz+Z)*bL.x,at[cz].el.style)}if(!bj){bB.bind(a4.scrollWrap,ba,a4)}a8("initialZoomInEnd",function(){a4.setContent(at[0],bJ-1);a4.setContent(at[2],bJ+1);at[0].el.style.display=at[2].el.style.display="block";if(ac.focus){a3.focus()}b3()});a4.setContent(at[1],bJ);a4.updateCurrItem();ao("afterInit");if(!ae){F=setInterval(function(){if(!cm&&!bW&&!bf&&(bK===a4.currItem.initialZoomLevel)){a4.updateSize()}},1000)}bB.addClass(a3,"pswp--visible")},close:function(){if(!G){return}G=false;bV=true;ao("close");aq();aL(a4.currItem,null,true,a4.destroy)},destroy:function(){ao("destroy");if(cb){clearTimeout(cb)}a3.setAttribute("aria-hidden","true");a3.className=af;if(F){clearInterval(F)}bB.unbind(a4.scrollWrap,ba,a4);bB.unbind(window,"scroll",a4);cl();a1();cj=null},panTo:function(p,cA,cz){if(!cz){if(p>co.min.x){p=co.min.x}else{if(p<co.max.x){p=co.max.x}}if(cA>co.min.y){cA=co.min.y}else{if(cA<co.max.y){cA=co.max.y}}}al.x=p;al.y=cA;ak()},handleEvent:function(p){p=p||window.event;if(aI[p.type]){aI[p.type](p)}},goTo:function(cC){if(bx){var cz;if(cC==bJ+1){cz=1}else{cz=-1}var p;if(!Y){ci=bJ}var cA;bJ+=cz;if(bJ<0){bJ=ac.loop?aS()-1:0;cA=true}else{if(bJ>=aS()){bJ=ac.loop?0:aS()-1;cA=true}}if(!cA||ac.loop){aW+=cz;bq-=cz;p=true}var cD=bL.x*bq;var cF=Math.abs(cD-aH.x);var cB=333;if(ci===bJ){p=false}Y=true;ao("mainScrollAnimStart");az("mainScroll",aH.x,cD,cB,bB.easing.cubic.out,ad,function(){a1();Y=false;ci=-1;if(p||ci!==bJ){a4.updateCurrItem()}ao("mainScrollAnimComplete")});if(p){a4.updateCurrItem(true)}return p}else{cC=bC(cC);var cE=cC-bJ;aW=cE;bJ=cC;a4.currItem=bE(bJ);bq-=cE;ad(bL.x*bq);a1();Y=false;a4.updateCurrItem()}},next:function(){a4.goTo(bJ+1)},prev:function(){a4.goTo(bJ-1)},updateCurrZoomItem:function(p){if(p){ao("beforeChange",0)}if(at[1].el.children.length){var cz=at[1].el.children[0];if(bB.hasClass(cz,"pswp__zoom-wrap")){bm=cz.style}else{bm=null}}else{bm=null}co=a4.currItem.bounds;bP=bK=a4.currItem.initialZoomLevel;al.x=co.center.x;al.y=co.center.y;if(p){ao("afterChange")}},invalidateCurrItems:function(){a5=true;for(var p=0;p<K;p++){if(at[p].item){at[p].item.needsUpdate=true}}},updateCurrItem:function(cz){if(aW===0){return}var cC=Math.abs(aW),cB;if(cz&&cC<2){return}a4.currItem=bE(bJ);h=false;ao("beforeChange",aW);if(cC>=K){Z+=aW+(aW>0?-K:K);cC=K}for(var cA=0;cA<cC;cA++){if(aW>0){cB=at.shift();at[K-1]=cB;Z++;bU((Z+2)*bL.x,cB.el.style);a4.setContent(cB,bJ-cC+cA+1+1)}else{cB=at.pop();at.unshift(cB);Z--;bU(Z*bL.x,cB.el.style);a4.setContent(cB,bJ+cC-cA-1-1)}}if(bm&&Math.abs(aW)===1){var p=bE(q);if(p.initialZoomLevel!==bK){P(p,b5);bA(p);cv(p)}}aW=0;a4.updateCurrZoomItem();q=bJ;ao("afterChange")},updateSize:function(cD){if(!ae&&ac.modal){var cA=bB.getScrollY();if(b6!==cA){a3.style.top=cA+"px";b6=cA}if(!cD&&T.x===window.innerWidth&&T.y===window.innerHeight){return}T.x=window.innerWidth;T.y=window.innerHeight;a3.style.height=T.y+"px"}b5.x=a4.scrollWrap.clientWidth;b5.y=a4.scrollWrap.clientHeight;aX();bL.x=b5.x+Math.round(b5.x*ac.spacing);bL.y=b5.y;ad(bL.x*bq);ao("beforeResize");if(Z!==undefined){var cz,cC,cB;for(var p=0;p<K;p++){cz=at[p];bU((p+Z)*bL.x,cz.el.style);cB=bJ+p-1;if(ac.loop&&aS()>2){cB=bC(cB)}cC=bE(cB);if(cC&&(a5||cC.needsUpdate||!cC.bounds)){a4.cleanSlide(cC);a4.setContent(cz,cB);if(p===1){a4.currItem=cC;a4.updateCurrZoomItem(true)}cC.needsUpdate=false}else{if(cz.index===-1&&cB>=0){a4.setContent(cz,cB)}}if(cC&&cC.container){P(cC,b5);bA(cC);cv(cC)}}a5=false}bP=bK=a4.currItem.initialZoomLevel;co=a4.currItem.bounds;if(co){al.x=co.center.x;al.y=co.center.y;ak(true)}ao("resize")},zoomTo:function(cG,cD,cA,p,cC){if(cD){bP=bK;ar.x=Math.abs(cD.x)-al.x;ar.y=Math.abs(cD.y)-al.y;a7(cw,al)}var cB=aJ(cG,false),cE={};cf("x",cB,cE,cG);cf("y",cB,cE,cG);var cH=bK;var cF={x:al.x,y:al.y};E(cE);var cz=function(cI){if(cI===1){bK=cG;al.x=cE.x;al.y=cE.y}else{bK=(cG-cH)*cI+cH;al.x=(cE.x-cF.x)*cI+cF.x;al.y=(cE.y-cF.y)*cI+cF.y}if(cC){cC(cI)}ak(cI===1)};if(cA){az("customZoomTo",0,1,cA,p||bB.easing.sine.inOut,cz)}else{cz(1)}}};var aF=30,W=10;var c,aB,bF={},bY={},m={},bd={},cg={},bc=[],cr={},aA,z=[],bZ={},t,br,ag,ci=0,j=bO(),am=0,bW,bu,cq,ai,bQ,L,av,bf,M,O,co,aH=bO(),bm,Y,ar=bO(),i=bO(),bk,au,aQ,aE,b,V=function(cz,p){return cz.x===p.x&&cz.y===p.y},bR=function(cz,p){return Math.abs(cz.x-p.x)<D&&Math.abs(cz.y-p.y)<D},aO=function(cz,p){bZ.x=Math.abs(cz.x-p.x);bZ.y=Math.abs(cz.y-p.y);return Math.sqrt(bZ.x*bZ.x+bZ.y*bZ.y)},cl=function(){if(bQ){aZ(bQ);bQ=null}},ct=function(){if(bW){bQ=a9(ct);ca()}},cy=function(){return !(ac.scaleMode==="fit"&&bK===a4.currItem.initialZoomLevel)},a6=function(cz,p){if(!cz||cz===document){return false}if(cz.getAttribute("class")&&cz.getAttribute("class").indexOf("pswp__scroll-wrap")>-1){return false}if(p(cz)){return cz}return a6(cz.parentNode,p)},e={},bg=function(cz,p){e.prevent=!a6(cz.target,ac.isClickableElement);ao("preventDragEvent",cz,p,e);return e.prevent},bS=function(cA,cz){cz.x=cA.pageX;cz.y=cA.pageY;cz.id=cA.identifier;return cz},o=function(cA,cz,p){p.x=(cA.x+cz.x)*0.5;p.y=(cA.y+cz.y)*0.5},bD=function(cz,p,cB){if(cz-aB>50){var cA=z.length>2?z.shift():{};cA.x=p;cA.y=cB;z.push(cA);aB=cz}},n=function(){var p=al.y-a4.currItem.initialPosition.y;return 1-Math.abs(p/(b5.y/2))},ce={},cd={},bT=[],aw,aV=function(p){while(bT.length>0){bT.pop()}if(!ah){if(p.type.indexOf("touch")>-1){if(p.touches&&p.touches.length>0){bT[0]=bS(p.touches[0],ce);if(p.touches.length>1){bT[1]=bS(p.touches[1],cd)}}}else{ce.x=p.pageX;ce.y=p.pageY;ce.id="";bT[0]=ce}}else{aw=0;bc.forEach(function(cz){if(aw===0){bT[0]=cz}else{if(aw===1){bT[1]=cz}}aw++})}return bT},g=function(cz,cI){var cB,cF=0,cG=al[cz]+cI[cz],cD,cA=cI[cz]>0,cH=aH.x+cI.x,cC=aH.x-cr.x,p,cE;if(cG>co.min[cz]||cG<co.max[cz]){cB=ac.panEndFriction}else{cB=1}cG=al[cz]+cI[cz]*cB;if(ac.allowPanToNext||bK===a4.currItem.initialZoomLevel){if(!bm){cE=cH}else{if(bk==="h"&&cz==="x"&&!cq){if(cA){if(cG>co.min[cz]){cB=ac.panEndFriction;cF=co.min[cz]-cG;cD=co.min[cz]-cw[cz]}if((cD<=0||cC<0)&&aS()>1){cE=cH;if(cC<0&&cH>cr.x){cE=cr.x}}else{if(co.min.x!==co.max.x){p=cG}}}else{if(cG<co.max[cz]){cB=ac.panEndFriction;cF=cG-co.max[cz];cD=cw[cz]-co.max[cz]}if((cD<=0||cC>0)&&aS()>1){cE=cH;if(cC>0&&cH<cr.x){cE=cr.x}}else{if(co.min.x!==co.max.x){p=cG}}}}}if(cz==="x"){if(cE!==undefined){ad(cE,true);if(cE===cr.x){L=false}else{L=true}}if(co.min.x!==co.max.x){if(p!==undefined){al.x=p}else{if(!L){al.x+=cI.x*cB}}}return cE!==undefined}}if(!Y){if(!L){if(bK>a4.currItem.fitRatio){al[cz]+=cI[cz]*cB}}}},b1=function(cB){if(cB.type==="mousedown"&&cB.button>0){return}if(by){cB.preventDefault();return}if(ag&&cB.type==="mousedown"){return}if(bg(cB,true)){cB.preventDefault()}ao("pointerDown");if(ah){var cz=bB.arraySearch(bc,cB.pointerId,"id");if(cz<0){cz=bc.length}bc[cz]={x:cB.pageX,y:cB.pageY,id:cB.pointerId}}var p=aV(cB),cA=p.length;av=null;a1();if(!bW||cA===1){bW=au=true;bB.bind(window,bI,a4);t=b=aQ=br=L=ai=bu=cq=false;bk=null;ao("firstTouchStart",p);a7(cw,al);U.x=U.y=0;a7(bd,p[0]);a7(cg,bd);cr.x=bL.x*bq;z=[{x:bd.x,y:bd.y}];aB=c=ap();aJ(bK,true);cl();ct()}if(!bf&&cA>1&&!Y&&!L){bP=bK;cq=false;bf=bu=true;U.y=U.x=0;a7(cw,al);a7(bF,p[0]);a7(bY,p[1]);o(bF,bY,i);ar.x=Math.abs(i.x)-al.x;ar.y=Math.abs(i.y)-al.y;M=O=aO(bF,bY)}},aM=function(cD){cD.preventDefault();if(ah){var cz=bB.arraySearch(bc,cD.pointerId,"id");if(cz>-1){var cC=bc[cz];cC.x=cD.pageX;cC.y=cD.pageY}}if(bW){var cA=aV(cD);if(!bk&&!ai&&!bf){if(aH.x!==bL.x*bq){bk="h"}else{var cB=Math.abs(cA[0].x-bd.x)-Math.abs(cA[0].y-bd.y);if(Math.abs(cB)>=W){bk=cB>0?"h":"v";av=cA}}}else{av=cA}}},ca=function(){if(!av){return}var cG=av.length;if(cG===0){return}a7(bF,av[0]);m.x=bF.x-bd.x;m.y=bF.y-bd.y;if(bf&&cG>1){bd.x=bF.x;bd.y=bF.y;if(!m.x&&!m.y&&V(av[1],bY)){return}a7(bY,av[1]);if(!cq){cq=true;ao("zoomGestureStarted")}var cB=aO(bF,bY);var cD=H(cB);if(cD>a4.currItem.initialZoomLevel+a4.currItem.initialZoomLevel/15){b=true}var cF=1,cH=b2(),cz=Q();if(cD<cH){if(ac.pinchToClose&&!b&&bP<=a4.currItem.initialZoomLevel){var p=cH-cD;var cE=1-p/(cH/1.2);d(cE);ao("onPinchClose",cE);aQ=true}else{cF=(cH-cD)/cH;if(cF>1){cF=1}cD=cH-cF*(cH/3)}}else{if(cD>cz){cF=(cD-cz)/(cH*6);if(cF>1){cF=1}cD=cz+cF*cH}}if(cF<0){cF=0}M=cB;o(bF,bY,j);U.x+=j.x-i.x;U.y+=j.y-i.y;a7(i,j);al.x=aN("x",cD);al.y=aN("y",cD);t=cD>bK;bK=cD;ak()}else{if(!bk){return}if(au){au=false;if(Math.abs(m.x)>=W){m.x-=av[0].x-cg.x}if(Math.abs(m.y)>=W){m.y-=av[0].y-cg.y}}bd.x=bF.x;bd.y=bF.y;if(m.x===0&&m.y===0){return}if(bk==="v"&&ac.closeOnVerticalDrag){if(!cy()){U.y+=m.y;al.y+=m.y;var cC=n();br=true;ao("onVerticalDrag",cC);d(cC);ak();return}}bD(ap(),bF.x,bF.y);ai=true;co=a4.currItem.bounds;var cA=g("x",m);if(!cA){g("y",m);E(al);ak()}}},I=function(cG){if(bb.isOldAndroid){if(ag&&cG.type==="mouseup"){return}if(cG.type.indexOf("touch")>-1){clearTimeout(ag);ag=setTimeout(function(){ag=0},600)}}ao("pointerUp");if(bg(cG,false)){cG.preventDefault()}var cA;if(ah){var cB=bB.arraySearch(bc,cG.pointerId,"id");if(cB>-1){cA=bc.splice(cB,1)[0];if(navigator.msPointerEnabled){var cF={4:"mouse",2:"touch",3:"pen"};cA.type=cF[cG.pointerType];if(!cA.type){cA.type=cG.pointerType||"mouse"}}else{cA.type=cG.pointerType||"mouse"}}}var cz=aV(cG),p,cH=cz.length;if(cG.type==="mouseup"){cH=0}if(cH===2){av=null;return true}if(cH===1){a7(cg,cz[0])}if(cH===0&&!bk&&!Y){if(!cA){if(cG.type==="mouseup"){cA={x:cG.pageX,y:cG.pageY,type:"mouse"}}else{if(cG.changedTouches&&cG.changedTouches[0]){cA={x:cG.changedTouches[0].pageX,y:cG.changedTouches[0].pageY,type:"touch"}}}}ao("touchRelease",cG,cA)}var cJ=-1;if(cH===0){bW=false;bB.unbind(window,bI,a4);cl();if(bf){cJ=0}else{if(am!==-1){cJ=ap()-am}}}am=cH===1?ap():-1;if(cJ!==-1&&cJ<150){p="zoom"}else{p="swipe"}if(bf&&cH<2){bf=false;if(cH===1){p="zoomPointerUp"}ao("zoomGestureEnded")}av=null;if(!ai&&!cq&&!Y&&!br){return}a1();if(!aA){aA=b9()}aA.calculateSwipeSpeed("x");if(br){var cC=n();if(cC<ac.verticalDragRange){a4.close()}else{var cD=al.y,cI=aE;az("verticalDrag",0,1,300,bB.easing.cubic.out,function(cK){al.y=(a4.currItem.initialPosition.y-cD)*cK+cD;d((1-cI)*cK+cI);ak()});ao("onVerticalDrag",1)}return}if((L||Y)&&cH===0){var cE=ab(p,aA);if(cE){return}p="zoomPointerUp"}if(Y){return}if(p!=="swipe"){A();return}if(!L&&bK>a4.currItem.fitRatio){aY(aA)}},b9=function(){var cA,cz;var p={lastFlickOffset:{},lastFlickDist:{},lastFlickSpeed:{},slowDownRatio:{},slowDownRatioReverse:{},speedDecelerationRatio:{},speedDecelerationRatioAbs:{},distanceOffset:{},backAnimDestination:{},backAnimStarted:{},calculateSwipeSpeed:function(cB){if(z.length>1){cA=ap()-aB+50;cz=z[z.length-2][cB]}else{cA=ap()-c;cz=cg[cB]}p.lastFlickOffset[cB]=bd[cB]-cz;p.lastFlickDist[cB]=Math.abs(p.lastFlickOffset[cB]);if(p.lastFlickDist[cB]>20){p.lastFlickSpeed[cB]=p.lastFlickOffset[cB]/cA}else{p.lastFlickSpeed[cB]=0}if(Math.abs(p.lastFlickSpeed[cB])<0.1){p.lastFlickSpeed[cB]=0}p.slowDownRatio[cB]=0.95;p.slowDownRatioReverse[cB]=1-p.slowDownRatio[cB];p.speedDecelerationRatio[cB]=1},calculateOverBoundsAnimOffset:function(cB,cC){if(!p.backAnimStarted[cB]){if(al[cB]>co.min[cB]){p.backAnimDestination[cB]=co.min[cB]}else{if(al[cB]<co.max[cB]){p.backAnimDestination[cB]=co.max[cB]}}if(p.backAnimDestination[cB]!==undefined){p.slowDownRatio[cB]=0.7;p.slowDownRatioReverse[cB]=1-p.slowDownRatio[cB];if(p.speedDecelerationRatioAbs[cB]<0.05){p.lastFlickSpeed[cB]=0;p.backAnimStarted[cB]=true;az("bounceZoomPan"+cB,al[cB],p.backAnimDestination[cB],cC||300,bB.easing.sine.out,function(cD){al[cB]=cD;ak()})}}}},calculateAnimOffset:function(cB){if(!p.backAnimStarted[cB]){p.speedDecelerationRatio[cB]=p.speedDecelerationRatio[cB]*(p.slowDownRatio[cB]+p.slowDownRatioReverse[cB]-p.slowDownRatioReverse[cB]*p.timeDiff/10);p.speedDecelerationRatioAbs[cB]=Math.abs(p.lastFlickSpeed[cB]*p.speedDecelerationRatio[cB]);p.distanceOffset[cB]=p.lastFlickSpeed[cB]*p.speedDecelerationRatio[cB]*p.timeDiff;al[cB]+=p.distanceOffset[cB]}},panAnimLoop:function(){if(aj.zoomPan){aj.zoomPan.raf=a9(p.panAnimLoop);p.now=ap();p.timeDiff=p.now-p.lastNow;p.lastNow=p.now;p.calculateAnimOffset("x");p.calculateAnimOffset("y");ak();p.calculateOverBoundsAnimOffset("x");p.calculateOverBoundsAnimOffset("y");if(p.speedDecelerationRatioAbs.x<0.05&&p.speedDecelerationRatioAbs.y<0.05){al.x=Math.round(al.x);al.y=Math.round(al.y);ak();bp("zoomPan");return}}}};return p},aY=function(p){p.calculateSwipeSpeed("y");co=a4.currItem.bounds;p.backAnimDestination={};p.backAnimStarted={};if(Math.abs(p.lastFlickSpeed.x)<=0.05&&Math.abs(p.lastFlickSpeed.y)<=0.05){p.speedDecelerationRatioAbs.x=p.speedDecelerationRatioAbs.y=0;p.calculateOverBoundsAnimOffset("x");p.calculateOverBoundsAnimOffset("y");return true}x("zoomPan");p.lastNow=ap();p.panAnimLoop()},ab=function(p,cA){var cB;if(!Y){ci=bJ}var cz;if(p==="swipe"){var cF=bd.x-cg.x,cE=cA.lastFlickDist.x<10;if(cF>aF&&(cE||cA.lastFlickOffset.x>20)){cz=-1}else{if(cF<-aF&&(cE||cA.lastFlickOffset.x<-20)){cz=1}}}var cD;if(cz){bJ+=cz;if(bJ<0){bJ=ac.loop?aS()-1:0;cD=true}else{if(bJ>=aS()){bJ=ac.loop?0:aS()-1;cD=true}}if(!cD||ac.loop){aW+=cz;bq-=cz;cB=true}}var cG=bL.x*bq;var cC=Math.abs(cG-aH.x);var cH;if(!cB&&cG>aH.x!==cA.lastFlickSpeed.x>0){cH=333}else{cH=Math.abs(cA.lastFlickSpeed.x)>0?cC/Math.abs(cA.lastFlickSpeed.x):333;cH=Math.min(cH,400);cH=Math.max(cH,250)}if(ci===bJ){cB=false}Y=true;ao("mainScrollAnimStart");az("mainScroll",aH.x,cG,cH,bB.easing.cubic.out,ad,function(){a1();Y=false;ci=-1;if(cB||ci!==bJ){a4.updateCurrItem()}ao("mainScrollAnimComplete")});if(cB){a4.updateCurrItem(true)}return cB},H=function(p){return 1/O*p*bP},A=function(){var cA=bK,cD=b2(),p=Q();if(bK<cD){cA=cD}else{if(bK>p){cA=p}}var cC=1,cz,cB=aE;if(aQ&&!t&&!b&&bK<cD){a4.close();return true}if(aQ){cz=function(cE){d((cC-cB)*cE+cB)}}a4.zoomTo(cA,0,200,bB.easing.cubic.out,cz);return true};aK("Gestures",{publicMethods:{initGestures:function(){var p=function(cA,cD,cB,cz,cC){B=cA+cD;bo=cA+cB;J=cA+cz;if(cC){R=cA+cC}else{R=""}};ah=bb.pointerEvent;if(ah&&bb.touch){bb.touch=false}if(ah){if(navigator.msPointerEnabled){p("MSPointer","Down","Move","Up","Cancel")}else{p("pointer","down","move","up","cancel")}}else{if(bb.touch){p("touch","start","move","end","cancel");ck=true}else{p("mouse","down","move","up")}}bI=bo+" "+J+" "+R;ba=B;if(ah&&!ck){ck=(navigator.maxTouchPoints>1)||(navigator.msMaxTouchPoints>1)}a4.likelyTouchDevice=ck;aI[B]=b1;aI[bo]=aM;aI[J]=I;if(R){aI[R]=aI[J]}if(bb.touch){ba+=" mousedown";bI+=" mousemove mouseup";aI.mousedown=aI[B];aI.mousemove=aI[bo];aI.mouseup=aI[J]}if(!ck){ac.allowPanToNext=false}}}});var cb,aL=function(cD,cA,cC,cz){if(cb){clearTimeout(cb)}by=true;bM=true;var cB;if(cD.initialLayout){cB=cD.initialLayout;cD.initialLayout=null}else{cB=ac.getThumbBoundsFn&&ac.getThumbBoundsFn(bJ)}var cF=cC?ac.hideAnimationDuration:ac.showAnimationDuration;var cE=function(){bp("initialZoom");if(!cC){d(1);if(cA){cA.style.display="block"}bB.addClass(a3,"pswp--animated-in");ao("initialZoom"+(cC?"OutEnd":"InEnd"))}else{a4.template.removeAttribute("style");a4.bg.removeAttribute("style")}if(cz){cz()}by=false};if(!cF||!cB||cB.x===undefined){ao("initialZoom"+(cC?"Out":"In"));bK=cD.initialZoomLevel;a7(al,cD.initialPosition);ak();a3.style.opacity=cC?0:1;d(1);if(cF){setTimeout(function(){cE()},cF)}else{cE()}return}var p=function(){var cH=bH,cG=!a4.currItem.src||a4.currItem.loadError||ac.showHideOpacity;if(cD.miniImg){cD.miniImg.style.webkitBackfaceVisibility="hidden"}if(!cC){bK=cB.w/cD.w;al.x=cB.x;al.y=cB.y-aC;a4[cG?"template":"bg"].style.opacity=0.001;ak()}x("initialZoom");if(cC&&!cH){bB.removeClass(a3,"pswp--animated-in")}if(cG){if(cC){bB[(cH?"remove":"add")+"Class"](a3,"pswp--animate_opacity")}else{setTimeout(function(){bB.addClass(a3,"pswp--animate_opacity")},30)}}cb=setTimeout(function(){ao("initialZoom"+(cC?"Out":"In"));if(!cC){bK=cD.initialZoomLevel;a7(al,cD.initialPosition);ak();d(1);if(cG){a3.style.opacity=1}else{d(1)}cb=setTimeout(cE,cF+20)}else{var cJ=cB.w/cD.w,cL={x:al.x,y:al.y},cM=bK,cK=aE,cI=function(cN){if(cN===1){bK=cJ;al.x=cB.x;al.y=cB.y-b6}else{bK=(cJ-cM)*cN+cM;al.x=(cB.x-cL.x)*cN+cL.x;al.y=(cB.y-b6-cL.y)*cN+cL.y}ak();if(cG){a3.style.opacity=1-cN}else{d(cK-cN*cK)}};if(cH){az("initialZoom",0,1,cF,bB.easing.cubic.out,cI,cE)}else{cI(1);cb=setTimeout(cE,cF+20)}}},cC?25:90)};p()};var aU,aT={},w=[],bM,by,b8={index:0,errorMsg:'<div class="pswp__error-msg"><a href="%url%" target="_blank">The image</a> could not be loaded.</div>',forceProgressiveLoading:false,preload:[1,1],getNumItemsFn:function(){return aU.length}};var bE,aS,y,bl=function(){return{center:{x:0,y:0},max:{x:0,y:0},min:{x:0,y:0}}},a0=function(cB,p,cA){var cz=cB.bounds;cz.center.x=Math.round((aT.x-p)/2);cz.center.y=Math.round((aT.y-cA)/2)+cB.vGap.top;cz.max.x=(p>aT.x)?Math.round(aT.x-p):cz.center.x;cz.max.y=(cA>aT.y)?Math.round(aT.y-cA)+cB.vGap.top:cz.center.y;cz.min.x=(p>aT.x)?0:cz.center.x;cz.min.y=(cA>aT.y)?cB.vGap.top:cz.center.y},P=function(cB,p,cE){if(cB.src&&!cB.loadError){var cC=!cE;if(cC){if(!cB.vGap){cB.vGap={top:0,bottom:0}}ao("parseVerticalMargin",cB)}aT.x=p.x;aT.y=p.y-cB.vGap.top-cB.vGap.bottom;if(cC){var cD=aT.x/cB.w;var cA=aT.y/cB.h;cB.fitRatio=cD<cA?cD:cA;var cz=ac.scaleMode;if(cz==="orig"){cE=1}else{if(cz==="fit"){cE=cB.fitRatio}}if(cE>1){cE=1}cB.initialZoomLevel=cE;if(!cB.bounds){cB.bounds=bl()}}if(!cE){return}a0(cB,cB.w*cE,cB.h*cE);if(cC&&cE===cB.initialZoomLevel){cB.initialPosition=cB.bounds.center}return cB.bounds}else{cB.w=cB.h=0;cB.initialZoomLevel=cB.fitRatio=1;cB.bounds=bl();cB.initialPosition=cB.bounds.center;return cB.bounds}},bi=function(cA,cC,cz,p,cD,cB){if(cC.loadError){return}if(p){cC.imageAppended=true;bA(cC,p,(cC===a4.currItem&&h));cz.appendChild(p);if(cB){setTimeout(function(){if(cC&&cC.loaded&&cC.placeholder){cC.placeholder.style.display="none";cC.placeholder=null}},500)}}},aP=function(cz){cz.loading=true;cz.loaded=false;var p=cz.img=bB.createEl("pswp__img","img");var cA=function(){cz.loading=false;cz.loaded=true;if(cz.loadComplete){cz.loadComplete(cz)}else{cz.img=null}p.onload=p.onerror=null;p=null};p.onload=cA;p.onerror=function(){cz.loadError=true;cA()};p.src=cz.src;return p},bt=function(p,cz){if(p.src&&p.loadError&&p.container){if(cz){p.container.innerHTML=""}p.container.innerHTML=ac.errorMsg.replace("%url%",p.src);return true}},bA=function(cC,cz,cB){if(!cC.src){return}if(!cz){cz=cC.container.lastChild}var p=cB?cC.w:Math.round(cC.w*cC.fitRatio),cA=cB?cC.h:Math.round(cC.h*cC.fitRatio);if(cC.placeholder&&!cC.loaded){cC.placeholder.style.width=p+"px";cC.placeholder.style.height=cA+"px"}cz.style.width=p+"px";cz.style.height=cA+"px"},u=function(){if(w.length){var p;for(var cz=0;cz<w.length;cz++){p=w[cz];if(p.holder.index===p.index){bi(p.index,p.item,p.baseDiv,p.img,false,p.clearPlaceholder)}}w=[]}};aK("Controller",{publicMethods:{lazyLoadItem:function(p){p=bC(p);var cz=bE(p);if(!cz||((cz.loaded||cz.loading)&&!a5)){return}ao("gettingData",p,cz);if(!cz.src){return}aP(cz)},initController:function(){bB.extend(ac,b8,true);a4.items=aU=cs;bE=a4.getItemAt;aS=ac.getNumItemsFn;y=ac.loop;if(aS()<3){ac.loop=false}a8("beforeChange",function(cE){var cD=ac.preload,cA=cE===null?true:(cE>=0),cB=Math.min(cD[0],aS()),cC=Math.min(cD[1],aS()),cz;for(cz=1;cz<=(cA?cC:cB);cz++){a4.lazyLoadItem(bJ+cz)}for(cz=1;cz<=(cA?cB:cC);cz++){a4.lazyLoadItem(bJ-cz)}});a8("initialLayout",function(){a4.currItem.initialLayout=ac.getThumbBoundsFn&&ac.getThumbBoundsFn(bJ)});a8("mainScrollAnimComplete",u);a8("initialZoomInEnd",u);a8("destroy",function(){var cz;for(var p=0;p<aU.length;p++){cz=aU[p];if(cz.container){cz.container=null}if(cz.placeholder){cz.placeholder=null}if(cz.img){cz.img=null}if(cz.preloader){cz.preloader=null}if(cz.loadError){cz.loaded=cz.loadError=false}}w=null})},getItemAt:function(p){if(p>=0){return aU[p]!==undefined?aU[p]:false}return false},allowProgressiveImg:function(){return ac.forceProgressiveLoading||!ck||ac.mouseUsed||screen.width>1200},setContent:function(cD,cC){if(ac.loop){cC=bC(cC)}var cz=a4.getItemAt(cD.index);if(cz){cz.container=null}var cE=a4.getItemAt(cC),cB;if(!cE){cD.el.innerHTML="";return}ao("gettingData",cC,cE);cD.index=cC;cD.item=cE;var cA=cE.container=bB.createEl("pswp__zoom-wrap");if(!cE.src&&cE.html){if(cE.html.tagName){cA.appendChild(cE.html)}else{cA.innerHTML=cE.html}}bt(cE);P(cE,b5);if(cE.src&&!cE.loadError&&!cE.loaded){cE.loadComplete=function(cG){if(!G){return}if(cD&&cD.index===cC){if(bt(cG,true)){cG.loadComplete=cG.img=null;P(cG,b5);cv(cG);if(cD.index===bJ){a4.updateCurrZoomItem()}return}if(!cG.imageAppended){if(bb.transform&&(Y||by)){w.push({item:cG,baseDiv:cA,img:cG.img,index:cC,holder:cD,clearPlaceholder:true})}else{bi(cC,cG,cA,cG.img,Y||by,true)}}else{if(!by&&cG.placeholder){cG.placeholder.style.display="none";cG.placeholder=null}}}cG.loadComplete=null;cG.img=null;ao("imageLoadComplete",cC,cG)};if(bB.features.transform){var p="pswp__img pswp__img--placeholder";p+=(cE.msrc?"":" pswp__img--placeholder--blank");var cF=bB.createEl(p,cE.msrc?"img":"");if(cE.msrc){cF.src=cE.msrc}bA(cE,cF);cA.appendChild(cF);cE.placeholder=cF}if(!cE.loading){aP(cE)}if(a4.allowProgressiveImg()){if(!bM&&bb.transform){w.push({item:cE,baseDiv:cA,img:cE.img,index:cC,holder:cD})}else{bi(cC,cE,cA,cE.img,true,true)}}}else{if(cE.src&&!cE.loadError){cB=bB.createEl("pswp__img","img");cB.style.opacity=1;cB.src=cE.src;bA(cE,cB);bi(cC,cE,cA,cB,true)}}if(!bM&&cC===bJ){bm=cA.style;aL(cE,(cB||cE.img))}else{cv(cE)}cD.el.innerHTML="";cD.el.appendChild(cA)},cleanSlide:function(p){if(p.img){p.img.onload=p.img.onerror=null}p.loaded=p.loading=p.img=p.imageAppended=false}}});var bz,X={},v=function(cz,cC,p){var cB=document.createEvent("CustomEvent"),cA={origEvent:cz,target:cz.target,releasePoint:cC,pointerType:p||"touch"};cB.initCustomEvent("pswpTap",true,true,cA);cz.target.dispatchEvent(cB)};aK("Tap",{publicMethods:{initTap:function(){a8("firstTouchStart",a4.onTapStart);a8("touchRelease",a4.onTapRelease);a8("destroy",function(){X={};bz=null})},onTapStart:function(p){if(p.length>1){clearTimeout(bz);bz=null}},onTapRelease:function(cz,cA){if(!cA){return}if(!ai&&!bu&&!cm){var cB=cA;if(bz){clearTimeout(bz);bz=null;if(bR(cB,X)){ao("doubleTap",cB);return}}if(cA.type==="mouse"){v(cz,cA,"mouse");return}var p=cz.target.tagName.toUpperCase();if(p==="BUTTON"||bB.hasClass(cz.target,"pswp__single-tap")){v(cz,cA);return}a7(X,cB);bz=setTimeout(function(){v(cz,cA);bz=null},300)}}}});var f;aK("DesktopZoom",{publicMethods:{initDesktopZoom:function(){if(bj){return}if(ck){a8("mouseUsed",function(){a4.setupDesktopZoom()})}else{a4.setupDesktopZoom(true)}},setupDesktopZoom:function(cA){f={};var p="wheel mousewheel DOMMouseScroll";a8("bindEvents",function(){bB.bind(a3,p,a4.handleMouseWheel)});a8("unbindEvents",function(){if(f){bB.unbind(a3,p,a4.handleMouseWheel)}});a4.mouseZoomedIn=false;var cC,cB=function(){if(a4.mouseZoomedIn){bB.removeClass(a3,"pswp--zoomed-in");a4.mouseZoomedIn=false}if(bK<1){bB.addClass(a3,"pswp--zoom-allowed")}else{bB.removeClass(a3,"pswp--zoom-allowed")}cz()},cz=function(){if(cC){bB.removeClass(a3,"pswp--dragging");cC=false}};a8("resize",cB);a8("afterChange",cB);a8("pointerDown",function(){if(a4.mouseZoomedIn){cC=true;bB.addClass(a3,"pswp--dragging")}});a8("pointerUp",cz);if(!cA){cB()}},handleMouseWheel:function(p){if(bK<=a4.currItem.fitRatio){if(ac.modal){if(!ac.closeOnScroll||cm||bW){p.preventDefault()}else{if(cc&&Math.abs(p.deltaY)>2){bH=true;a4.close()}}}return true}p.stopPropagation();f.x=0;if("deltaX" in p){if(p.deltaMode===1){f.x=p.deltaX*18;f.y=p.deltaY*18}else{f.x=p.deltaX;f.y=p.deltaY}}else{if("wheelDelta" in p){if(p.wheelDeltaX){f.x=-0.16*p.wheelDeltaX}if(p.wheelDeltaY){f.y=-0.16*p.wheelDeltaY}else{f.y=-0.16*p.wheelDelta}}else{if("detail" in p){f.y=p.detail}else{return}}}aJ(bK,true);var cA=al.x-f.x,cz=al.y-f.y;if(ac.modal||(cA<=co.min.x&&cA>=co.max.x&&cz<=co.min.y&&cz>=co.max.y)){p.preventDefault()}a4.panTo(cA,cz)},toggleDesktopZoom:function(cA){cA=cA||{x:b5.x/2+bX.x,y:b5.y/2+bX.y};var cz=ac.getDoubleTapZoom(true,a4.currItem);var p=bK===cz;a4.mouseZoomedIn=!p;a4.zoomTo(p?a4.currItem.initialZoomLevel:cz,cA,333);bB[(!p?"add":"remove")+"Class"](a3,"pswp--zoomed-in")}}});var a2={history:true,galleryUID:1};var b4,bG,b0,aa,cx,an,bs,bN,b7,ay,bn,k,N=function(){return bn.hash.substring(1)},cu=function(){if(b4){clearTimeout(b4)}if(b0){clearTimeout(b0)}},cn=function(){var cB=N(),cD={};if(cB.length<5){return cD}var cz,cA=cB.split("&");for(cz=0;cz<cA.length;cz++){if(!cA[cz]){continue}var cC=cA[cz].split("=");if(cC.length<2){continue}cD[cC[0]]=cC[1]}if(ac.galleryPIDs){var p=cD.pid;cD.pid=0;for(cz=0;cz<aU.length;cz++){if(aU[cz].pid===p){cD.pid=cz;break}}}else{cD.pid=parseInt(cD.pid,10)-1}if(cD.pid<0){cD.pid=0}return cD},aG=function(){if(b0){clearTimeout(b0)}if(cm||bW){b0=setTimeout(aG,500);return}if(aa){clearTimeout(bG)}else{aa=true}var p=(bJ+1);var cA=bE(bJ);if(cA.hasOwnProperty("pid")){p=cA.pid}var cz=bs+"&gid="+ac.galleryUID+"&pid="+p;if(!bN){if(bn.hash.indexOf(cz)===-1){ay=true}}var cB=bn.href.split("#")[0]+"#"+cz;if(k){if("#"+cz!==window.location.hash){history[bN?"replaceState":"pushState"]("",document.title,cB)}}else{if(bN){bn.replace(cB)}else{bn.hash=cz}}bN=true;bG=setTimeout(function(){aa=false},60)};aK("History",{publicMethods:{initHistory:function(){bB.extend(ac,a2,true);if(!ac.history){return}bn=window.location;ay=false;b7=false;bN=false;bs=N();k=("pushState" in history);if(bs.indexOf("gid=")>-1){bs=bs.split("&gid=")[0];bs=bs.split("?gid=")[0]}a8("afterChange",a4.updateURL);a8("unbindEvents",function(){bB.unbind(window,"hashchange",a4.onHashChange)});var p=function(){an=true;if(!b7){if(ay){history.back()}else{if(bs){bn.hash=bs}else{if(k){history.pushState("",document.title,bn.pathname+bn.search)}else{bn.hash=""}}}}cu()};a8("unbindEvents",function(){if(bH){p()}});a8("destroy",function(){if(!an){p()}});a8("firstUpdate",function(){bJ=cn().pid});var cz=bs.indexOf("pid=");if(cz>-1){bs=bs.substring(0,cz);if(bs.slice(-1)==="&"){bs=bs.slice(0,-1)}}setTimeout(function(){if(G){bB.bind(window,"hashchange",a4.onHashChange)}},40)},onHashChange:function(){if(N()===bs){b7=true;a4.close();return}if(!aa){cx=true;a4.goTo(cn().pid);cx=false}},updateURL:function(){cu();if(cx){return}if(!bN){aG()}else{b4=setTimeout(aG,800)}}}});bB.extend(a4,cp)};return a});